---
title: "Lab 1 - Nossas Perguntas"
author: "Gabriel Morais Lúcio de Araújo"
date: "23 de abril de 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(plotly)
library(scales)
theme_set(theme_bw())
```

```{r warning=FALSE}
dados = read_csv(here("data/series_from_imdb.csv"), 
                    progress = FALSE,
                    col_types = cols(.default = col_double(), 
                                     series_name = col_character(), 
                                     episode = col_character(), 
                                     url = col_character(),
                                     season = col_character())) %>% filter(series_name %in% c("Black Mirror", "Mr Robot"))

series <- dados %>% group_by(series_name) %>%
  summarise(n = n()) 
```
***
#### Qual das séries que você escolheu é mais bem avaliada no IMDB? A diferença é grande? Pequena? Muda de acordo com as temporadas da série?

```{r}
medias <- dados %>%
  group_by(series_name, season) %>%
  summarise(mediana = median(user_rating), media = mean(user_rating), max_rating = max(user_rating), min_rating = min(user_rating))

medias

boxplot.user_ratings <- dados %>%
  ggplot(aes(x = "", y = user_rating)) +
  geom_boxplot(width = .4, outlier.color = NA) +
  facet_wrap(~ series_name) +
  geom_jitter(width = .1, size = 2, alpha = .5, aes(color = season)) +
  labs('Série mais bem avaliada IMDB', x = 'Série', y = 'Notas de Usuário', color = 'Temporada')

boxplot.user_ratings
```

Considero a série mais bem avaliada como sendo a com maior mediana. Então temos a série *Black Mirror* com mediana = **8.3** e a série *Mr Robot* com mediana = **8.8**. A diferença não é grande, chegando a maior diferença de **0.6** entre a mediana da 2ª temporada de ambas as séries. Algo interessante é que na 2 temporada de *Black Mirror* temos tanto o episódio mais bem avaliado quanto o episódio pior avaliado, sendo o episódio *White Christmas* com nota **9.1** e o eposódio *The Waldo Moment* com nota **7.0**.

#### Qual das séries que você escolheu tem episódios de qualidade mais irregular segundo o IMDB? A diferença é grande? Pequena?

```{r}
line.user_ratings <- dados %>%
  ggplot(aes(x = season_ep, y = user_rating, color = season, group = season)) + 
  geom_line() + 
  geom_point() +
  facet_wrap(~ series_name) +
  labs('Série mais bem avaliada IMDB', x = 'Episódio', y = 'Notas de Usuário', color = 'Temporada')

line.user_ratings
```

Podemos ver que *Mr Robot* não possui uma variação muito notável nas notas de seus episódios, já em *Black Mirror* é possível notar que a 2ª e 3ª temporada possuem um episódio, em cada, que tem uma qualidade bem mais inferior que o restante dos episódios. Inclusive, temos na 2ª temporada o episódio pior avaliado e em seguida temos o melhor avaliado da série, com uma diferença de aproximadamente **2.0**(*The Waldo Moment* tem uma nota 22% menor que a nota do episódio *White Christmas*.
